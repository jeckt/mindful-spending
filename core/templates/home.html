<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mindful Spending</title>
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
    <link href="/static/img/favicon.ico" rel="icon">
  </head>
  <body>

    <div id="id_header" class="row">
      <div class="col-md-8 col-md-offset-2">
        <div class="text-center">
          <h1>Mindful Spending</h1>
          {% if expenses %}
            <h2 >Total: <span id="id_total_expense">${{ total_expenses }}</span></h2>
          {% else %}
            <h2>Total: $0.00</h2>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div id="id_expense_input" class="row">
        <div class="col-md-8 col-md-offset-2">
          <form method="POST" action="{% url 'new_expense' %}">
            <div class="form-group-row">
              <div class="col-xs-8">{{ form.description }}</div>
              <div class="col-xs-2">{{ form.amount }}</div>
              <div class="col-xs-2">
                <input id="id_submit" class="btn btn-primary btn-block"
                      type="submit" value="log">
              </div>
            {{ form.date }}
            {% csrf_token %}
            {% if form.errors %}
              {% for field in form %}
                {% for error in field.errors %}
                  <div class="form-group has-error">
                      <span class="help-block">{{ error }}</span>
                  </div>
                {% endfor %}
              {% endfor %}
            {% endif %}
            </div>
          </form>
        </div>
      </div>

      <div class="row">
        <div class="col-md-8 col-md-offset-2">
          {% if expenses %}
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Delete?</th>
              </tr>
            </thead>

            <tbody>
              {% for expense in expenses %}
                <tr>
                  <td>{{ expense.date|date:'d-M-Y' }}</td>
                  <td>{{ expense.description }}</td>
                  <td>${{ expense.amount }}</td>
                  <td>
                    <form method="POST" action="{% url 'delete_expense' expense.id %}">
                      <button id="id_delete_{{ forloop.counter }}" type="submit">
                        <i class="glyphicon glyphicon-remove"></i>
                      </button>
                      {% csrf_token %}
                    </form>
                </tr>
              {% endfor %}
            </tbody>

          </table>
          {% endif %}
        </div>
      </div>

    </div>
  </body>
</html>
